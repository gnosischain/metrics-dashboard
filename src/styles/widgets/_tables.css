/* Modern Table Widget Styles */

/* ==================
   Modern Table Base Styles
   ================== */

.table-widget {
  position: relative;
  width: 100%;
  height: 100%;
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--border-radius-lg);
  box-shadow: var(--shadow-sm);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.table-widget.dark {
  background: var(--color-surface);
  border-color: var(--color-border);
  box-shadow: var(--shadow-base);
}

/* ==================
   Modern Tabulator Overrides
   ================== */

/* Table Container */
.table-widget .tabulator {
  background: transparent !important;
  border: none !important;
  font-family: var(--font-family-base) !important;
  font-size: 14px !important;
  line-height: var(--line-height-base) !important;
  height: 100% !important;
  display: flex !important;
  flex-direction: column !important;
}

/* Table Holder - ensure it grows to fill available space */
.table-widget .tabulator .tabulator-tableHolder {
  background: transparent !important;
  flex: 1 !important;
  overflow-y: auto !important;
}

/* Header Styling */
.table-widget .tabulator .tabulator-header {
  background: var(--color-accent-softer) !important;
  border-bottom: 1px solid var(--color-border) !important;
  border-radius: 0 !important;
  font-weight: var(--font-weight-semibold) !important;
  color: var(--color-text-secondary) !important;
  padding: 0 !important;
  flex-shrink: 0 !important;
}

.table-widget .tabulator .tabulator-col {
  background: transparent !important;
  border-right: 1px solid var(--color-border) !important;
  padding: 0 !important;
  position: relative !important;
}

.table-widget .tabulator .tabulator-col:last-child {
  border-right: none !important;
}

.table-widget .tabulator .tabulator-col-content {
  padding: 10px 12px !important;
  font-weight: var(--font-weight-semibold) !important;
  font-size: var(--font-size-xs) !important;
  text-transform: uppercase !important;
  letter-spacing: 0.06em !important;
  color: var(--color-text-tertiary) !important;
}

.table-widget .tabulator .tabulator-header .tabulator-col:first-child {
  border-radius: 0 !important;
}

.table-widget .tabulator .tabulator-header .tabulator-col:last-child {
  border-radius: 0 !important;
}

/* Row Styling */
.table-widget .tabulator .tabulator-table {
  background: transparent !important;
  color: var(--color-text-secondary) !important;
  height: 100% !important;
}

.table-widget .tabulator .tabulator-row {
  background: var(--color-surface) !important;
  border-bottom: 1px solid var(--color-border-subtle) !important;
  transition: background-color var(--transition-base), box-shadow var(--transition-base), transform var(--transition-base) !important;
  min-height: 40px !important;
}

.table-widget .tabulator .tabulator-row:hover {
  background: var(--color-accent-softer) !important;
  transform: translateY(-1px) !important;
  box-shadow: var(--shadow-sm) !important;
}

.table-widget .tabulator .tabulator-row:last-child {
  border-bottom: none !important;
}

/* Cell Styling */
.table-widget .tabulator .tabulator-cell {
  border-right: none !important;
  padding: 10px 12px !important;
  font-size: var(--font-size-sm) !important;
  font-weight: var(--font-weight-medium) !important;
  color: var(--color-text-secondary) !important;
  vertical-align: middle !important;
}

.table-widget .tabulator .tabulator-row:nth-child(even) {
  background: rgba(148, 163, 184, 0.06) !important;
}

.table-widget .tabulator .tabulator-row:nth-child(even):hover {
  background: var(--color-accent-softer) !important;
}

/* ==================
   Full Height Table Support
   ================== */

.metric-card .card-content {
  display: flex !important;
  flex-direction: column !important;
  height: 100% !important;
  overflow: hidden !important;
}

.metric-card .card-content .table-widget {
  flex: 1 !important;
  min-height: 0 !important;
}

.grid-item[style*="minHeight"] .table-widget,
.grid-item[style*="min-height"] .table-widget {
  height: 100% !important;
}

/* ==================
   Modern Pagination Styling (when enabled)
   ================== */

.table-widget .tabulator .tabulator-footer {
  background: var(--color-surface) !important;
  border-top: 1px solid var(--color-border) !important;
  padding: 8px 10px !important;
  display: block !important;
  align-items: center !important;
  min-height: 46px !important;
  flex-shrink: 0 !important;
}

.table-widget .tabulator .tabulator-footer .tabulator-footer-contents {
  display: flex !important;
  align-items: center !important;
  justify-content: flex-start !important;
  gap: 8px !important;
  width: 100% !important;
  padding: 0 !important;
}

.table-widget .tabulator .tabulator-paginator {
  display: flex !important;
  align-items: center !important;
  margin-left: auto !important;
  text-align: right !important;
  flex: 0 0 auto !important;
  gap: 6px !important;
}

.table-widget .tabulator .tabulator-page {
  background: var(--color-surface) !important;
  border: 1px solid var(--color-border) !important;
  color: var(--color-text-secondary) !important;
  padding: 4px 8px !important;
  border-radius: var(--border-radius-base) !important;
  font-weight: var(--font-weight-medium) !important;
  font-size: var(--font-size-xs) !important;
  line-height: 1.2 !important;
  cursor: pointer !important;
  transition: background-color var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast) !important;
  min-width: 28px !important;
  text-align: center !important;
}

.table-widget .tabulator .tabulator-page:hover {
  background: var(--color-accent-softer) !important;
  border-color: var(--color-border-hover) !important;
  transform: translateY(-1px) !important;
}

.table-widget .tabulator .tabulator-page.active {
  background: var(--primary-blue) !important;
  border-color: var(--primary-blue) !important;
  color: #ffffff !important;
  box-shadow: 0 6px 14px -8px rgba(79, 70, 229, 0.6) !important;
}

.table-widget .tabulator .tabulator-page[data-page="first"],
.table-widget .tabulator .tabulator-page[data-page="prev"],
.table-widget .tabulator .tabulator-page[data-page="next"],
.table-widget .tabulator .tabulator-page[data-page="last"] {
  background: var(--color-accent-softer) !important;
  border-color: var(--color-border) !important;
  font-weight: var(--font-weight-semibold) !important;
}

.table-widget .tabulator .tabulator-page[data-page="first"]:hover,
.table-widget .tabulator .tabulator-page[data-page="prev"]:hover,
.table-widget .tabulator .tabulator-page[data-page="next"]:hover,
.table-widget .tabulator .tabulator-page[data-page="last"]:hover {
  background: var(--color-accent-soft) !important;
  border-color: var(--color-border-hover) !important;
}

.table-widget .tabulator .tabulator-page-size {
  display: flex !important;
  align-items: center !important;
  gap: 8px !important;
  font-size: var(--font-size-sm) !important;
  color: var(--color-text-tertiary) !important;
  font-weight: var(--font-weight-medium) !important;
}

.table-widget .tabulator .tabulator-page-size select {
  background: var(--color-surface) !important;
  border: 1px solid var(--color-border) !important;
  border-radius: var(--border-radius-base) !important;
  padding: 6px 12px !important;
  font-size: var(--font-size-sm) !important;
  color: var(--color-text-secondary) !important;
  cursor: pointer !important;
  outline: none !important;
  transition: border-color var(--transition-fast), box-shadow var(--transition-fast) !important;
}

.table-widget .tabulator .tabulator-page-size select:hover {
  border-color: var(--color-border-hover) !important;
}

.table-widget .tabulator .tabulator-page-size select:focus {
  border-color: var(--primary-blue) !important;
  box-shadow: 0 0 0 3px var(--color-focus-ring) !important;
}

.table-widget .tabulator .tabulator-counter {
  font-size: var(--font-size-xs) !important;
  color: var(--color-text-tertiary) !important;
  font-weight: var(--font-weight-medium) !important;
}

/* ==================
   Semantic Link + Chip Styles
   ================== */

.table-widget .table-link {
  color: var(--primary-blue) !important;
  text-decoration: none !important;
  font-weight: var(--font-weight-semibold) !important;
  border-bottom: 1px solid transparent !important;
  transition: color var(--transition-fast), border-color var(--transition-fast) !important;
}

.table-widget .table-link:hover {
  color: var(--primary-blue-hover) !important;
  border-bottom-color: var(--primary-blue-hover) !important;
}

.table-widget .table-link:focus-visible {
  outline: 2px solid var(--color-focus-ring) !important;
  outline-offset: 2px !important;
  border-radius: var(--border-radius-sm) !important;
}

.table-widget .action-chip {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 60px;
  padding: 2px 8px;
  border-radius: var(--border-radius-full);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  line-height: 1.2;
  border: 1px solid transparent;
}

.table-widget .action-chip--in {
  color: var(--color-success);
  background: rgba(16, 185, 129, 0.12);
  border-color: rgba(16, 185, 129, 0.24);
}

.table-widget .action-chip--out {
  color: var(--color-error);
  background: rgba(239, 68, 68, 0.12);
  border-color: rgba(239, 68, 68, 0.24);
}

.table-widget .action-chip--neutral {
  color: var(--color-text-secondary);
  background: var(--color-accent-softer);
  border-color: var(--color-border);
}

/* ==================
   Dark Mode Styles
   ================== */

.table-widget.dark .tabulator .tabulator-header {
  background: var(--color-accent-softer) !important;
  border-bottom: 1px solid var(--color-border) !important;
}

.table-widget.dark .tabulator .tabulator-col {
  border-right: 1px solid var(--color-border) !important;
}

.table-widget.dark .tabulator .tabulator-col-content {
  color: var(--color-text-tertiary) !important;
}

.table-widget.dark .tabulator .tabulator-row {
  background: var(--color-surface) !important;
  border-bottom: 1px solid var(--color-border-subtle) !important;
  color: var(--color-text-primary) !important;
}

.table-widget.dark .tabulator .tabulator-row:hover {
  background: var(--color-accent-softer) !important;
}

.table-widget.dark .tabulator .tabulator-row:nth-child(even) {
  background: rgba(2, 6, 23, 0.3) !important;
}

.table-widget.dark .tabulator .tabulator-row:nth-child(even):hover {
  background: var(--color-accent-softer) !important;
}

.table-widget.dark .tabulator .tabulator-cell {
  color: var(--color-text-primary) !important;
}

.table-widget.dark .tabulator .tabulator-footer {
  background: var(--color-surface) !important;
  border-top: 1px solid var(--color-border) !important;
}

.table-widget.dark .tabulator .tabulator-page {
  background: var(--color-surface) !important;
  border-color: var(--color-border) !important;
  color: var(--color-text-primary) !important;
}

.table-widget.dark .tabulator .tabulator-page:hover {
  background: var(--color-accent-soft) !important;
  border-color: var(--color-border-hover) !important;
}

.table-widget.dark .tabulator .tabulator-page.active {
  background: var(--primary-blue) !important;
  border-color: var(--primary-blue) !important;
  color: #ffffff !important;
}

.table-widget.dark .tabulator .tabulator-page-size select {
  background: var(--color-surface) !important;
  border-color: var(--color-border) !important;
  color: var(--color-text-primary) !important;
}

.table-widget.dark .tabulator .tabulator-counter {
  color: var(--color-text-tertiary) !important;
}

.table-widget.dark .table-link {
  color: var(--primary-blue) !important;
}

.table-widget.dark .table-link:hover {
  color: var(--primary-blue-hover) !important;
  border-bottom-color: var(--primary-blue-hover) !important;
}

.table-widget.dark .action-chip--in {
  color: #6ee7b7;
  background: rgba(16, 185, 129, 0.2);
  border-color: rgba(16, 185, 129, 0.35);
}

.table-widget.dark .action-chip--out {
  color: #fda4af;
  background: rgba(239, 68, 68, 0.22);
  border-color: rgba(239, 68, 68, 0.36);
}

.table-widget.dark .action-chip--neutral {
  color: var(--color-text-primary);
  background: var(--color-accent-softer);
  border-color: var(--color-border);
}

/* ==================
   Responsive Design
   ================== */

@media (max-width: 768px) {
  .table-widget .tabulator .tabulator-cell {
    padding: 8px 10px !important;
    font-size: 13px !important;
  }

  .table-widget .tabulator .tabulator-col-content {
    padding: 8px 10px !important;
    font-size: 11px !important;
  }

  .table-widget .tabulator .tabulator-footer {
    padding: 12px 14px !important;
    flex-direction: column !important;
    gap: 12px !important;
    display: flex !important;
  }

  .table-widget .tabulator .tabulator-footer .tabulator-footer-contents {
    flex-direction: column !important;
    align-items: stretch !important;
    gap: 10px !important;
  }

  .table-widget .tabulator .tabulator-paginator {
    margin-left: 0 !important;
    justify-content: center !important;
  }

  .table-widget .tabulator .tabulator-paginator {
    flex-wrap: wrap !important;
    justify-content: center !important;
  }
}

/* ==================
   Special Data Type Styling
   ================== */

.table-widget .tabulator .tabulator-cell[data-type="number"] {
  text-align: right !important;
  font-variant-numeric: tabular-nums !important;
  font-feature-settings: "tnum" !important;
}

.table-widget .tabulator .tabulator-cell[data-field*="digest"],
.table-widget .tabulator .tabulator-cell[data-field*="hash"],
.table-widget .tabulator .tabulator-cell[data-field*="version"] {
  font-family: var(--font-family-mono) !important;
  font-size: 12px !important;
  background: var(--color-accent-softer) !important;
  border: 1px solid var(--color-border) !important;
  border-radius: var(--border-radius-sm) !important;
  padding: 4px 8px !important;
  margin: 8px 0 !important;
  display: inline-block !important;
}

.table-widget .tabulator .tabulator-cell[data-field*="time"],
.table-widget .tabulator .tabulator-cell[data-field*="date"] {
  font-variant-numeric: tabular-nums !important;
  color: var(--color-text-tertiary) !important;
}

/* ==================
   Loading and Empty States
   ================== */

.table-widget .tabulator .tabulator-placeholder {
  background: transparent !important;
  color: var(--color-text-tertiary) !important;
  font-size: 16px !important;
  padding: 36px 20px !important;
  text-align: center !important;
  font-weight: var(--font-weight-medium) !important;
}

/* ==================
   Scrollbar Styling
   ================== */

.table-widget .tabulator .tabulator-tableHolder::-webkit-scrollbar {
  width: 6px !important;
  height: 6px !important;
}

.table-widget .tabulator .tabulator-tableHolder::-webkit-scrollbar-track {
  background: transparent !important;
}

.table-widget .tabulator .tabulator-tableHolder::-webkit-scrollbar-thumb {
  background: var(--color-border-hover) !important;
  border-radius: 3px !important;
  transition: background var(--transition-fast) !important;
}

.table-widget .tabulator .tabulator-tableHolder::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-muted) !important;
}

.table-widget.dark .tabulator .tabulator-tableHolder::-webkit-scrollbar-thumb {
  background: var(--color-border-hover) !important;
}

.table-widget.dark .tabulator .tabulator-tableHolder::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-tertiary) !important;
}
